<script>
  // Button to start webcam via user gesture (helps some browsers)
  document.getElementById('btnCam').addEventListener('click', startWebcam);

  (async () => {
    diagEl.textContent = 'DIAG:\nPage loaded. Booting…\n';
    // Don’t auto-start webcam; wait for user tap if permission was blocked
    loadModels(); // models can load immediately
    // Safety net: if both become ready but UI didn’t flip, force enable after 3s
    setTimeout(() => {
      if (webcamReady && modelsReady) {
        const btn = document.getElementById('btnPlay');
        if (btn && btn.disabled) {
          btn.disabled = false;
          diag('WARN: Forcing Play button enabled (both ready).');
        }
      }
    }, 3000);
  })();
</script>
